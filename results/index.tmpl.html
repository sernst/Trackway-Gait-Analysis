<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trial And Group Reports</title>

  <link rel="stylesheet" href="style/shared.css"/>
  <link rel="stylesheet" href="style/index.css" />

  <script src="js/jquery.js" type="application/javascript"></script>
</head>

<body>
<div class="container">
  <h1>Results</h1>
  <h2>Analysis:</h2>
  <div id="analysis" class="entries"></div>
  <div style="clear:both;width:100%;height:20px"></div>

  <h2>Groups:</h2>
  <div id="groups" class="entries"></div>
  <div style="clear:both;width:100%;height:20px"></div>

  <h2>Trials:</h2>
  <div id="trials" class="entries"></div>
  <div style="clear:both;width:100%;height:100px"></div>

  <script type="application/javascript">

    window.DATA = '###DATA###';

    $(function () {
      console.log('Initializing...');

      function createEntry(parent, data) {

        function open_link() {
          window.open(data.url, '_blank');
        }

        var e = $('<div></div>')
            .addClass('entry')
            .appendTo(parent)
            .click(open_link);

        $('<div></div>')
            .addClass('title')
            .html(data.title)
            .appendTo(e);

        $('<div></div>')
            .addClass('summary')
            .html(data.summary)
            .appendTo(e);
      }

      window.DATA.analysis.forEach(function (analysis) {
        createEntry($('#analysis'), analysis);
      });

      window.DATA.groups.forEach(function (group) {
        createEntry($('#groups'), group);
      });

      window.DATA.trials.forEach(function (trial) {
        createEntry($('#trials'), trial);
      });
    });
  </script>

</div>
</body>
</html>
